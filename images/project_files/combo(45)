YUI.add("hermes-template-photo-selector-photo-list-photo-interaction",(function(e,l){var t=e.Template.Handlebars.revive({1:function(e,l,t,n,a){var o,r=e.escapeExpression,i=e.lookupProperty||function(e,l){if(Object.prototype.hasOwnProperty.call(e,l))return e[l]};return'<a href="'+r(e.lambda(null!=(o=null!=(o=null!=l?i(l,"photo"):l)?i(o,"owner"):o)?i(o,"url"):o,l))+'" class="attribution">'+r((i(t,"intlMessage")||l&&i(l,"intlMessage")||e.hooks.helperMissing).call(null!=l?l:e.nullContext||{},{name:"intlMessage",hash:{user:null!=(o=null!=(o=null!=l?i(l,"photo"):l)?i(o,"owner"):o)?i(o,"displayname"):o,intlName:"common.BY_USER"},data:a,loc:{start:{line:7,column:84},end:{line:7,column:154}}}))+"</a>"},compiler:[8,">= 4.3.0"],main:function(e,l,t,n,a){var o,r,i=null!=l?l:e.nullContext||{},s=e.escapeExpression,p=e.lookupProperty||function(e,l){if(Object.prototype.hasOwnProperty.call(e,l))return e[l]};return'<div class="photo-list-photo-interaction">\n\t<div class="square"></div>\n\t<div class="interaction-bar">\n\t\t<div class="text">\n\t\t\t<a href="'+s("function"==typeof(r=null!=(r=p(t,"photoPageUrl")||(null!=l?p(l,"photoPageUrl"):l))?r:e.hooks.helperMissing)?r.call(i,{name:"photoPageUrl",hash:{},data:a,loc:{start:{line:6,column:12},end:{line:6,column:28}}}):r)+'" class="title">'+s(e.lambda(null!=(o=null!=l?p(l,"photo"):l)?p(o,"title"):o,l))+"</a>\n\t\t\t"+(null!=(o=p(t,"if").call(i,null!=(o=null!=(o=null!=l?p(l,"photo"):l)?p(o,"owner"):o)?p(o,"displayname"):o,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a,loc:{start:{line:7,column:3},end:{line:7,column:165}}}))?o:"")+'\n\t\t</div>\n\t</div>\n</div>\n<div class="disabled-overlay"></div>\n'},useData:!0}),n={};e.Array.each([],(function(l){var t=e.Template.get("hermes/"+l);t&&(n[l]=t)})),e.Template.register("hermes/photo-selector-photo-list-photo-interaction",(function(l,a){return(a=a||{}).partials=a.partials?e.merge(n,a.partials):n,t(l,a)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("photo-selector-photolist-interaction-view",(function(t){var e=require("hermes-core/type-validator");t.namespace("Views")[this.name]=t.Base.create(this.name,t.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(t){return""===this.get("container").get("innerHTML")&&this.setContainerHTML(""),this.hasMultiSelect=t.primaryPhotoListConfig&&t.primaryPhotoListConfig.hasMultiSelect,this.multiSelectLimit=void 0===t.primaryPhotoListConfig.multiSelectLimit?1:t.primaryPhotoListConfig.multiSelectLimit,this.listType=t.primaryPhotoListConfig.type,this.galleryId=t.primaryPhotoListConfig.galleryId,this.isDisabled=!1,this.isDisabledSelected=!1,this},loadState:function(){var e=this,i=[];return"galleryFaves"===this.listType&&this.galleryId&&(i.push(this.appContext.getModelRegistry("gallery-photo-association-models").then((function(t){t.exists(e.galleryId+"-"+e.get("id"))&&(e.isDisabled=!0,e.isDisabledSelected=!0)}))),i.push(this.appContext.getModel("gallery-faves-models",this.appContext.getViewer().nsid+"-"+e.galleryId).then((function(t){var i=t.getValue("nonGalleryAddablePhotos").getList(),s=!1;i&&(s=i.some((function(t){return t.id===e.get("model").id}))),s&&(e.isDisabled=!0)})))),i.push(this.appContext.getModel("profile-selected-photos-models",this.appContext.getViewer().nsid).then(function(t){t.getValue("photos").getFromListByID(this.get("model").getValue("id"))&&this.set("isActive",!0)}.bind(this))),t.Promise.all(i)},buildContainer:function(){var t=this.get("model");return this.setContainerWithTemplate("photo-selector-photo-list-photo-interaction",{photo:t.toJSON(),photoPageUrl:this.get("photoPageUrl")}),this},activate:function(){var e,i,s=this.get("container"),o=s.one(".disabled-overlay");return this.galleryId&&(e=this.intlMessage({intlName:"gallery.PHOTO_CANT_ADD_TO_GALLERY",mediaType:this.get("model").getValue("mediaType")}),i=this.intlMessage({intlName:"gallery.PHOTO_ALREADY_IN_GALLERY",mediaType:this.get("model").getValue("mediaType")})),this.registerEventHandler(s.on("click",this.selectPhoto.bind(this))),this.hasMultiSelect||this.registerEventHandler(t.on("photoSelector:subviewEvent",this.handleOtherPhotoSelected,this)),this.get("isActive")?this.get("isActive")&&s.addClass("active"):s.removeClass("active"),this.isDisabled&&(s.addClass("disabled"),o.setAttribute("title",e)),this.isDisabledSelected&&(s.addClass("disabled-selected"),o.setAttribute("title",i)),this},selectPhoto:function(e){if(e.halt(),!this.isDisabled)if(this.get("isActive")&&this.hasMultiSelect)this.set("isActive",!1),this.get("container").removeClass("active"),t.fire("photoSelector:subviewEvent",{eventName:"unselectPhotoFromPhotoList",id:this.get("id")});else{if(this.hasMultiSelect)return this.appContext.getModel("profile-selected-photos-models",this.appContext.getViewer().nsid).then(function(e){e.getValue("photos").size()+1<=this.multiSelectLimit&&(this.set("isActive",!0),this.get("container").addClass("active"),t.fire("photoSelector:subviewEvent",{eventName:"selectPhotoFromPhotoList",id:this.get("id")}))}.bind(this));this.set("isActive",!0),this.get("container").addClass("active"),t.fire("photoSelector:subviewEvent",{eventName:"selectPhotoFromPhotoList",id:this.get("id")})}},handleOtherPhotoSelected:function(t){if("selectPhotoFromPhotoList"===t.eventName&&this.get("isActive")){if(t.id===this.get("id"))return;this.set("isActive",!1),this.get("container")._node&&this.get("container").removeClass("active")}}},{ATTRS:{id:{writeOnce:"initOnly",validator:function(t,i){return e.photoId(t)}},model:{writeOnce:"initOnly"},photoPageUrl:{writeOnce:"initOnly"}}})}),"@VERSION@",{requires:["flickr-view","hermes-template-photo-selector-photo-list-photo-interaction","attribute-helpers"],optionalRequires:["fluid","hermes-core"],langBundles:["common","gallery"]});YUI.add("hermes-lang-gallery_zh-hk",(function(e,a){e.Intl.add("hermes/gallery","zh-HK",{VIEW_YOUR_GALLERIES:[{type:0,value:"查看博覽館"}],GALLERIES_WITH_YOUR_ITEMS:[{type:0,value:"內有你作品的博覽館"}],GALLERY_CURATED_BY:[{type:0,value:'<a href="'},{type:1,value:"ownerUrl"},{type:0,value:'">'},{type:1,value:"ownerName"},{type:0,value:"</a> 建立的博覽館"}],GALLERY_CURATED_BY_YOU:[{type:0,value:'<a href="'},{type:1,value:"ownerUrl"},{type:0,value:'">你</a></a> 建立的博覽館！'}],PRIVATE_GALLERY_CURATED_BY:[{type:0,value:'<a href="'},{type:1,value:"ownerUrl"},{type:0,value:'">'},{type:1,value:"ownerName"},{type:0,value:"</a> 建立的私人博覽館"}],YOU_ATTRIBUTION:[{type:0,value:"YOU!"}],BACK_TO_GALLERIES_LIST:[{type:0,value:"返回博覽館清單"}],ADD_COMMENT:[{type:0,value:"加入留言"}],EDIT_GALLERY:[{type:0,value:"編輯博覽館"}],PRIVATE_GALLERY:[{type:0,value:"私人博覽館"}],DELETE_GALLERY:[{type:0,value:"刪除博覽館"}],GALLERY_CONFIRM_DELETE_MESSAGE:[{type:0,value:"你確定要刪除此博覽館嗎？"}],MAKE_GALLERY_PUBLIC:[{type:0,value:"要公開此博覽館嗎？"}],GALLERY_PUBLIC_EXPLANATION:[{type:0,value:"其他人將能夠看到此博覽館，系統會在你新增相片時傳送通知。"}],LARGE_VIEW_LAYOUT_TITLE:[{type:0,value:"大圖檢視"}],REORDER_PHOTOS_LAYOUT_TITLE:[{type:0,value:"重新排列相片"}],GALLERY_PHOTO_REMOVE_MESSAGE:[{type:0,value:"此相片將會從博覽館中移除。"}],GALLERY_PHOTO_REMOVE_TITLE:[{type:0,value:"要從博覽館中移除此相片嗎？"}],PHOTO_REMOVED:[{type:5,value:"mediaType",options:{photo:{value:[{type:0,value:"已移除"}]},video:{value:[{type:0,value:"影片"}]},other:{value:[{type:0,value:"相片"}]}}}],REMOVE_FROM_GALLERY:[{type:0,value:"從博覽館移除"}],GALLERY_REMARK_OWNER_SAYS:[{type:1,value:"ownerName"},{type:0,value:" 表示："}],GALLERY_REMARK_WHY:[{type:0,value:"為什麼你選擇此"},{type:5,value:"mediaType",options:{photo:{value:[{type:0,value:"相片"}]},video:{value:[{type:0,value:"影片"}]},other:{value:[{type:0,value:"相片"}]}}},{type:0,value:"？"}],IN_THIS_GALLERY:[{type:0,value:"此博覽館中："}],AND_COUNT_MORE:[{type:0,value:"以及另外 "},{type:1,value:"count"},{type:0,value:" 張相片"}],NEW_GALLERY:[{type:0,value:"新的博覽館"}],NOTHING_HERE_YET:[{type:0,value:"尚未加入任何相片。"}],NOTHING_HERE_YET_DETAILS:[{type:0,value:"你可以在相片或影片的詳細資料頁面儲存作品，或在這裡選擇你最愛的作品。"}],ADD_PHOTOS_AND_VIDEOS:[{type:0,value:"加入相片和影片"}],REMOVING:[{type:0,value:"正在移除..."}],ARE_YOU_SURE_REMOVE_PHOTO:[{type:0,value:"你確定要移除此"},{type:5,value:"mediaType",options:{photo:{value:[{type:0,value:"相片"}]},video:{value:[{type:0,value:"影片"}]},other:{value:[{type:0,value:"相片"}]}}},{type:0,value:"嗎？"}],ARE_YOU_SURE_REMOVE_VIDEO:[{type:0,value:"你確定要移除此影片嗎？"}],GALLERY_ADD:[{type:0,value:"新增"}],GALLERY_CHOOSE_PHOTOS_LIMIT:[{type:6,value:"limit",options:{one:{value:[{type:0,value:"最多可另外選擇 "},{type:7},{type:0,value:" 張相片加入博覽館。"}]},other:{value:[{type:0,value:"最多可另外選擇 "},{type:7},{type:0,value:" 張相片加入博覽館。"}]}},offset:0,pluralType:"cardinal"}],GALLERY_FULL_CANT_ADD:[{type:0,value:"你的博覽館空間已滿！請先移除部分相片，才能新增其他相片。"}],GALLERY_EDIT_REMARK_TOOLTIP:[{type:0,value:"新增備註"}],GALLERY_VIEW_REMARK_TOOLTIP:[{type:0,value:"查看備註"}],GALLERY_FEATURED_BANNER_MESSAGE:[{type:0,value:'你正在查看新的 Flickr 博覽館。<a href="'},{type:1,value:"learnUrl"},{type:0,value:'" class="learn-more-link">了解更多</a>。<a href="'},{type:1,value:"feedbackUrl"},{type:0,value:'" class="feedback-link">提供意見</a>。'}],GALLERY_FEATURED_TITLE:[{type:0,value:"新的博覽館"}],GALLERY_FEATURED_DESCRIPTION:[{type:0,value:"現在可享更多功能及儲存最多 500 張相片。"}],GALLERY_FEATURED_LEARN_MORE:[{type:0,value:"了解更多"}],GALLERY_FEATURED_SUBMIT_FEEDBACK:[{type:0,value:"提交意見"}],PHOTO_CANT_ADD_TO_GALLERY:[{type:0,value:"無法將此"},{type:5,value:"mediaType",options:{photo:{value:[{type:0,value:"相片"}]},video:{value:[{type:0,value:"影片"}]},other:{value:[{type:0,value:"相片"}]}}},{type:0,value:"加到博覽館。"}],PHOTO_ALREADY_IN_GALLERY:[{type:0,value:"博覽館內已有此"},{type:5,value:"mediaType",options:{photo:{value:[{type:0,value:"相片"}]},video:{value:[{type:0,value:"影片"}]},other:{value:[{type:0,value:"相片"}]}}},{type:0,value:"。"}],USER_HASNT_CREATED_GALLERIES:[{type:1,value:"ownerName"},{type:0,value:" 尚未建立任何博覽館。"}],GALLERIES_COUNT:[{type:6,value:"count",options:{one:{value:[{type:0,value:" 個"},{type:1,value:"countString"},{type:0,value:"博覽館"}]},other:{value:[{type:1,value:"countString"},{type:0,value:"博覽館"}]}},offset:0,pluralType:"cardinal"}]})}),"@VERSION@",{requires:["intl"]});YUI.add("hermes-template-photo-selector-sets-photolist-set-interaction",(function(t,e){var l=t.Template.Handlebars.revive({1:function(t,e,l,n,a){var o,s=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return'\t\t\t\t<span class="album-photo-count">'+t.escapeExpression((s(l,"intlMessage")||e&&s(e,"intlMessage")||t.hooks.helperMissing).call(null!=e?e:t.nullContext||{},{name:"intlMessage",hash:{selectedCount:null!=(o=null!=e?s(e,"album"):e)?s(o,"publicPhotosCount"):o,intlName:"album-page.PUBLIC_ITEMS_COUNT"},data:a,loc:{start:{line:6,column:36},end:{line:6,column:130}}}))+"</span>\n"},3:function(t,e,l,n,a){var o,s=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return'\t\t\t<span class="album-photo-count">'+t.escapeExpression((s(l,"intlMessage")||e&&s(e,"intlMessage")||t.hooks.helperMissing).call(null!=e?e:t.nullContext||{},{name:"intlMessage",hash:{selectedCount:null!=(o=null!=e?s(e,"album"):e)?s(o,"totalCount"):o,intlName:"album-page.PHOTOS_COUNT"},data:a,loc:{start:{line:8,column:35},end:{line:8,column:116}}}))+"</span>\n"},compiler:[8,">= 4.3.0"],main:function(t,e,l,n,a){var o,s=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return'<div class="photo-list-album-interaction photo-selector-album dark">\n\t<div class="interaction-bar">\n\t\t<h4 class="album-title">'+t.escapeExpression(t.lambda(null!=(o=null!=e?s(e,"album"):e)?s(o,"title"):o,e))+"</h4>\n"+(null!=(o=s(l,"if").call(null!=e?e:t.nullContext||{},null!=e?s(e,"publicOnlyPhotos"):e,{name:"if",hash:{},fn:t.program(1,a,0),inverse:t.program(3,a,0),data:a,loc:{start:{line:5,column:2},end:{line:9,column:9}}}))?o:"")+"\t</div>\n</div>\n"},useData:!0}),n={};t.Array.each([],(function(e){var l=t.Template.get("hermes/"+e);l&&(n[e]=l)})),t.Template.register("hermes/photo-selector-sets-photolist-set-interaction",(function(e,a){return(a=a||{}).partials=a.partials?t.merge(n,a.partials):n,l(e,a)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("photo-selector-sets-photolist-interaction-view",(function(t){var e=require("hermes-core/type-validator");t.namespace("Views")[this.name]=t.Base.create(this.name,t.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(t){return""===this.get("container").get("innerHTML")&&this.setContainerHTML(""),this.publicOnlyPhotos=t.publicOnlyPhotos,this},loadState:function(){return this.appContext.getModel(this.get("engagementModelName"),this.get("id")).then(function(t){this.set("engagement",t)}.bind(this))},buildContainer:function(){return this.setContainerWithTemplate("photo-selector-sets-photolist-set-interaction",{album:this.get("model").toJSON(),publicOnlyPhotos:this.publicOnlyPhotos,albumPageUrl:this.get("albumPageUrl")}),this},activate:function(){return this.registerEventHandler(this.get("container").on("click",this.selectSet.bind(this))),this},selectSet:function(e){e.halt(),t.fire("photoSelector:subviewEvent",{eventName:"selectSetFromPhotoList",id:this.get("id"),title:this.get("model").getValue("title")})},destructor:function(){}},{ATTRS:{id:{writeOnce:"initOnly",validator:function(t,i){return e.photoId(t)}},model:{writeOnce:"initOnly"},albumPageUrl:{writeOnce:"initOnly"},engagement:{value:null},engagementModelName:{writeOnce:"initOnly",value:null,validator:function(e,i){return t.AttributeHelpers.validateString(e)}}}})}),"@VERSION@",{requires:["flickr-view","hermes-template-photo-selector-sets-photolist-set-interaction","attribute-helpers"],optionalRequires:["fluid","hermes-core"],langBundles:["album-page"]});