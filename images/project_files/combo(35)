YUI.add("hermes-template-drag-drop-photo-item",(function(t,a){var e=t.Template.Handlebars.revive({compiler:[8,">= 4.3.0"],main:function(t,a,e,l,n){var i,r,s=null!=a?a:t.nullContext||{},o=t.hooks.helperMissing,d="function",p=t.escapeExpression,c=t.lookupProperty||function(t,a){if(Object.prototype.hasOwnProperty.call(t,a))return t[a]};return'<div class="drag-drop-item">\n\t<div class="drag-drop-content">\n\t\t<div class="photo" style="background-image: url('+p(typeof(r=null!=(r=c(e,"displayUrl")||(null!=a?c(a,"displayUrl"):a))?r:o)===d?r.call(s,{name:"displayUrl",hash:{},data:n,loc:{start:{line:3,column:50},end:{line:3,column:64}}}):r)+')">\n\t\t</div>\n\t\t<div class="sub-photo-info-bar">\n\t\t\t<div class="details-container">\n\t\t\t\t<div class="details">\n\t\t\t\t\t<span draggable="false" class="detail title">'+p(typeof(r=null!=(r=c(e,"title")||(null!=a?c(a,"title"):a))?r:o)===d?r.call(s,{name:"title",hash:{},data:n,loc:{start:{line:8,column:50},end:{line:8,column:59}}}):r)+'</span>\n\t\t\t\t\t<span draggable="false" class="detail attribution">'+p(t.lambda(null!=(i=null!=a?c(a,"owner"):a)?c(i,"displayname"):i,a))+"</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n"},useData:!0}),l={};t.Array.each([],(function(a){var e=t.Template.get("hermes/"+a);e&&(l[a]=e)})),t.Template.register("hermes/drag-drop-photo-item",(function(a,n){return(n=n||{}).partials=n.partials?t.merge(l,n.partials):l,e(a,n)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("hermes-template-drag-drop-album-item",(function(t,n){var a=t.Template.Handlebars.revive({1:function(t,n,a,l,e){var o,i=t.lookupProperty||function(t,n){if(Object.prototype.hasOwnProperty.call(t,n))return t[n]};return'\t\t\t\t\t\t\t<span class="metadot">&middot;</span>\n\t\t\t\t\t\t\t<span class="album-video-count">\n\t\t\t\t\t\t\t\t'+t.escapeExpression("function"==typeof(o=null!=(o=i(a,"videoCountString")||(null!=n?i(n,"videoCountString"):n))?o:t.hooks.helperMissing)?o.call(null!=n?n:t.nullContext||{},{name:"videoCountString",hash:{},data:e,loc:{start:{line:14,column:8},end:{line:14,column:28}}}):o)+"\n\t\t\t\t\t\t\t</span>\n"},compiler:[8,">= 4.3.0"],main:function(t,n,a,l,e){var o,i,s=null!=n?n:t.nullContext||{},r=t.hooks.helperMissing,u="function",p=t.escapeExpression,c=t.lookupProperty||function(t,n){if(Object.prototype.hasOwnProperty.call(t,n))return t[n]};return'<div class="drag-drop-item">\n\t<div class="drag-drop-content">\n\t\t<div class="photo avatar album" style="background-image: url('+p(typeof(i=null!=(i=c(a,"displayUrl")||(null!=n?c(n,"displayUrl"):n))?i:r)===u?i.call(s,{name:"displayUrl",hash:{},data:e,loc:{start:{line:3,column:63},end:{line:3,column:77}}}):i)+')">\n\t\t</div>\n\t\t<div class="sub-photo-info-bar always-show">\n\t\t\t<div class="details-container">\n\t\t\t\t<div class="details">\n\t\t\t\t\t<span draggable="false" class="detail title">'+p(typeof(i=null!=(i=c(a,"title")||(null!=n?c(n,"title"):n))?i:r)===u?i.call(s,{name:"title",hash:{},data:e,loc:{start:{line:8,column:50},end:{line:8,column:59}}}):i)+'</span>\n\t\t\t\t\t<span draggable="false" class="detail attribution multi-attribution">\n\t\t\t\t\t\t<span class="album-photo-count">'+p(typeof(i=null!=(i=c(a,"photoCountString")||(null!=n?c(n,"photoCountString"):n))?i:r)===u?i.call(s,{name:"photoCountString",hash:{},data:e,loc:{start:{line:10,column:38},end:{line:10,column:58}}}):i)+"</span>\n"+(null!=(o=c(a,"if").call(s,null!=n?c(n,"hasVideos"):n,{name:"if",hash:{},fn:t.program(1,e,0),inverse:t.noop,data:e,loc:{start:{line:11,column:6},end:{line:16,column:13}}}))?o:"")+"\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n"},useData:!0}),l={};t.Array.each([],(function(n){var a=t.Template.get("hermes/"+n);a&&(l[n]=a)})),t.Template.register("hermes/drag-drop-album-item",(function(n,e){return(e=e||{}).partials=e.partials?t.merge(l,e.partials):l,a(n,e)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("reorder-grid-helper",(function(t,e){t.ReorderGridHelper=function(o,r,i){const l=require("hermes-core/flog")(e),s=t.mix({langBundles:["common"],appContext:o},t.Localizable),a=new t.TemplateLibraryHelper(o,{localizeLib:s});function n(e,o){let r=e,i=r.getValue("owner"),l=t.PhotoModelHelper.getSizeToFit(r.id,{width:o,height:o},{sizes:r.getValue("sizes"),includeSquare:!0,cropToFit:!0}).displayUrl;return a.getTemplate("drag-drop-photo-item")({displayUrl:l,title:r.getValue("title"),owner:{displayname:i.getValue("displayname")}})}class m{constructor(){this.PER_PAGE=50}get listDetails(){return{size:this.itemList.length,totalItems:this.collection.totalItems}}async load(t){const e=await this.loadCollection(this.modelParams);return this.listModel=e.listModel,this.collection=e.collection,this.currentPage=0,this.itemList=[],this.reorderedItemList=[],Promise.resolve()}async loadCollection(t){const e=await o.getModel(t.registryName,t.modelIdOrAttributes),r=e.getValue(t.collectionAttributeName);return{listModel:e,collection:r}}async loadPageFromCollection(t,e,o){try{if(o.length>=t.totalItems)throw new Error("No more items to fetch from collection.");return await t.getPage({page:e,perPage:this.PER_PAGE})}catch(t){return Promise.reject(t)}}async loadMore(){try{const t=await this.loadPageFromCollection(this.collection,++this.currentPage,this.itemList);return this.itemList=this.itemList.concat(t),this.reorderedItemList=this.reorderedItemList.concat(t),t}catch(t){throw this.currentPage--,t}}}return new{gallery:class extends m{constructor({galleryId:t}){super(),this.layout={maxWidth:140,itemSpacing:{horizontal:8,vertical:8}},this.modelParams={registryName:"gallery-info-models",modelIdOrAttributes:t,collectionAttributeName:"photoList"}}getItemTemplate(t){return n(t,this.layout.maxWidth)}async reorderItems(t){try{await this.listModel.reorderPhotosRemote(t);this.collection.reset(),this.collection.addPage({page:1,perPage:this.PER_PAGE,pageContent:this.reorderedItemList,totalItems:this.collection.totalItems,totalPages:this.collection.totalPages})}catch(t){return l.error("Error reordering photos",{err:t}),Promise.reject(t)}}},album:class extends m{constructor({albumId:t}){super(),this.layout={maxWidth:140,itemSpacing:{horizontal:8,vertical:8}},this.modelParams={registryName:"set-models",modelIdOrAttributes:t,collectionAttributeName:"photoPageList"},this.albumId=t}getItemTemplate(t){return n(t,this.layout.maxWidth)}async reorderItems(t){const e=this.reorderedItemList.map((t=>t.id));var r={photoset_id:this.albumId,photo_ids:e.join(",")};return o.callAPI("flickr.photosets.reorderPhotos",r)}},albums:class extends m{constructor({ownerId:t}){super(),this.layout={maxWidth:180,itemSpacing:{horizontal:8,vertical:12}},this.modelParams={registryName:"sets-models",modelIdOrAttributes:t,collectionAttributeName:"albumsList"},this.ownerId=t}async load(){return await super.load(),this.albumModelRegistry=await o.getModelRegistry("set-models"),Promise.resolve()}getItemTemplate(t){let e=t,o=this.albumModelRegistry.getSizeToFit(e.id,{width:this.layout.maxWidth,height:this.layout.maxWidth}),r=o?o.displayUrl:"",i=e.getValue("photoCount"),l=e.getValue("videoCount");return a.getTemplate("drag-drop-album-item")({displayUrl:r,title:e.getValue("title"),photoCountString:s.intlMessage({intlName:"common.PHOTO_COUNT_FORMATTED",photoCount:i,countString:i}),videoCountString:s.intlMessage({intlName:"common.VIDEO_COUNT_FORMATTED",videoCount:l,countString:l}),hasVideos:l>0})}async reorderItems(t){var e={photoset_ids:this.reorderedItemList.map((t=>t.id)).join(",")};return o.callAPI("flickr.photosets.orderSets",e)}}}[r](i)}}),"@VERSION@",{requires:["event-custom","template-lib-helper","photo-model-helper","hermes-template-drag-drop-photo-item","hermes-template-drag-drop-album-item"],langBundles:["common"]});YUI.add("album-toolbar-view",(function(e,t){var o=require("hermes-core/flog")(t);e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,subviewConfig:{"fluid-magic-slideshow-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0}},initializer:function(e){return this.albumId=e.albumId,this.albumPhotoListLayoutStyle=e.albumPhotoListLayoutStyle,this.nsidOrPathAlias=e.nsidOrPathAlias,""===this.get("container").get("innerHTML")&&this.setContainerHTML(""),this.params=e,this},loadState:function(){var e=this;return e.appContext.getModel("set-models",e.albumId).then((function(t){e.set("albumModel",t)}))},buildContainer:function(){var e=this.get("albumModel"),t=e.id,o=!1;return this.appContext.getViewer().signedIn&&this.appContext.getViewer().nsid===e.getValue("owner").id&&(o=!0),this.setContainerWithTemplate("album-toolbar",{nsidOrPathAlias:this.nsidOrPathAlias,viewerIsOwner:o,viewerCanEdit:o&&!e.getValue("isAutoUploadSet"),setId:t,isJustifiedLayout:"justified"===this.albumPhotoListLayoutStyle,isStoryLayout:"story"===this.albumPhotoListLayoutStyle}),this},activate:function(){var t=this.get("container"),o=this;return this.registerEventHandler(t.all(".layout").on("click",(function(i){i.preventDefault();var r=i.target.getAttribute("data-layout");r!==o.layoutStyle&&(t.one(".selected").removeClass("selected"),i.target.addClass("selected"),e.fire("albumToolbarView:layoutChange",r),o.layoutStyle=r)}))),this.addPhotosButton=t.one(".add-photo-button"),this.addPhotosButton&&this.registerEventHandler(this.addPhotosButton.on("click",this.showAddPhotosModal.bind(this))),this.reorderButton=t.one(".reorder-button"),this.reorderButton&&this.registerEventHandler(this.reorderButton.on("click",this.showReorderModal.bind(this))),this},showReorderModal:function(){var t=this,o=new e.ReorderGridHelper(this.appContext,"album",{albumId:this.albumId}),i=new e.Views["reorder-grid-modal-view"]({reorderHelper:o,appContext:this.appContext});this.reorderModal=new e.Views.FluidModal({appContext:this.appContext,subview:i,dismissOnOverlayClick:!1,classList:["reorder-grid-modal"],width:800,hasSubviewConfigRefactor:!0}),this.reorderModal.show(),i.registerEventHandler(e.on("reorderGridModal:close",(function(o){t.reorderModal.close(o),"done"===o.action&&e.config.win.location.reload()})))},showAddPhotosModal:function(){this.photoSelectorView=new e.Views["photo-selector-view"]({appContext:this.appContext,enableMultiSelect:!0,enableVideos:!0,multiSelectLimit:e.config.flickr.api.max_photos_in_photoset,searchable:{yours:!0},navBarConfig:{links:[{id:"photostream",name:this.intlMessage({intlName:"common.PHOTOSTREAM"}),value:"photostream",selected:!0},{id:"sets",name:this.intlMessage({intlName:"common.ALBUMS"}),value:"sets"}],enableSearch:!0,breakpointConfig:[{maxWidth:700,enableSearch:!1},{maxWidth:500,enableSearch:!1}],onClose:e=>{this.photoSelectorModal.close()}},initialButtonState:{confirm:"disabled"},onConfirm:e=>this.handlePhotoSelectorConfirm(e)}),this.photoSelectorModal=new e.Views.FluidModal({appContext:this.appContext,dismissOnOverlayClick:!0,showCancelButton:!1,actionButtonDisabled:!0,subview:this.photoSelectorView,width:Math.round(.8*Math.max(1280,e.config.win.innerWidth)),height:Math.round(e.config.win.innerHeight-60),fullWindow:!0,hasSubviewConfigRefactor:!0,flexLayout:!0,classList:"photo-selector"}).show(),this.photoSelectorView.registerEventHandler(e.on("photoSelector:selected",(()=>{this.photoSelectorView.confirmView.setButtonState({confirm:""})}))),this.photoSelectorView.registerEventHandler(e.on("photoSelector:unselected",(e=>{e.wasLastPhotoSelected&&this.photoSelectorView.confirmView.setButtonState({confirm:"disabled"})})))},handlePhotoSelectorConfirm:function(){var t,i=this,r=this.get("albumModel"),n={},s=[],a=[],l=[],h=[];this.photoSelectorView.confirmView.setButtonState({confirm:"loading"}),this.photoSelectorView.get("selectionModel").getValue("photos").getList().forEach(((e,t)=>{let o=e.getValue("id");n[o]=e,e.getValue("isVideo")?h.push(o):l.push(o)})),t=Object.keys(n).length;for(var d=0;d<t;d+=500){let e=t;d+500<t&&(e=d+500),s.push(Object.keys(n).slice(d,e))}return s.forEach((function(e,t){let o=r.registry.remote.addPhoto({photoID:e.join(","),isMultiplePhotos:!0,photosSelectedIds:l,videosSelectedIds:h,numberOfPhotosSelected:l.length,numberOfVideosSelected:h.length,setID:r.getValue("id"),updateItemCounts:0===t},this.appContext).then((t=>{for(let o of e)t.errors&&t.errors.find((e=>e.photo_id===o))||r.addPhoto(n[o]);return t})).catch((e=>{throw console.log("err:",e),e}));a.push(o)})),e.Promise.all(a).then((function(e){return e&&e[0]?e[0].setModel:null})).then((e=>(i.fire("subviewViewEvent","newPhotoAddedToAlbum"),i.photoSelectorModal.close(),e))).catch((t=>{o.error("Error while adding photos to album",{err:t}),new e.Views.FluidModal({appContext:i.appContext,subview:new e.Views["confirmation-dialog-view"]({appContext:i.appContext,title:i.intlMessage({intlName:"common.OOPS"}),htmlMessage:t.message,showCancelButton:!1}),hasSubviewConfigRefactor:!0}).show(),i.photoSelectorView.confirmView.setButtonState({confirm:""})}))}})}),"@VERSION@",{requires:["flickr-view","hermes-template-album-toolbar","confirmation-dialog-view","fluid-magic-slideshow-view","reorder-grid-modal-view","reorder-grid-helper"],optional:[],langBundles:["album-page","common","reorder"]});YUI.add("hermes-lang-album-page_zh-hk",(function(e,t){e.Intl.add("hermes/album-page","zh-HK",{PHOTOS_COUNT:[{type:6,value:"selectedCount",options:{one:{value:[{type:7},{type:0,value:" 張相片"}]},other:{value:[{type:7},{type:0,value:" 張相片"}]}},offset:0,pluralType:"cardinal"}],PUBLIC_PHOTOS_COUNT:[{type:6,value:"selectedCount",options:{one:{value:[{type:7},{type:0,value:" 公開相片"}]},other:{value:[{type:7},{type:0,value:" 公開相片"}]}},offset:0,pluralType:"cardinal"}],PUBLIC_ITEMS_COUNT:[{type:6,value:"selectedCount",options:{one:{value:[{type:7},{type:0,value:" 公開項目"}]},other:{value:[{type:7},{type:0,value:" 公開項目"}]}},offset:0,pluralType:"cardinal"}],VIDEOS_COUNT:[{type:6,value:"selectedCount",options:{one:{value:[{type:7},{type:0,value:" 個影片"}]},other:{value:[{type:7},{type:0,value:" 個影片"}]}},offset:0,pluralType:"cardinal"}],VIEWS_COUNT:[{type:6,value:"selectedCount",options:{one:{value:[{type:7},{type:0,value:" 次檢視"}]},other:{value:[{type:7},{type:0,value:" 次檢視"}]}},offset:0,pluralType:"cardinal"}],BACK_TO_ALBUMS:[{type:0,value:"返回相簿清單"}],EDIT_IN_ORGANIZR:[{type:0,value:"在 Organizr 中編輯"}],EDIT_COVER:[{type:0,value:"編輯封面"}],SELECT_COVER_PHOTO:[{type:0,value:"選擇封面相片"}],SELECT:[{type:0,value:"選擇"}],ERROR_COVER_PHOTO:[{type:0,value:"嘗試設定你的封面相片時發生問題。 請再試一次。"}],ERROR_UPDATING_ALBUM_TITLE_DESCRIPTION:[{type:0,value:"更新相簿標題和說明時發生錯誤。"}],ALBUM_ADD_DESCRIPTION:[{type:0,value:"按一下這裡為此相簿輸入說明"}],ERROR_CREATING_PHOTOBOOK_FROM_ALBUM:[{type:0,value:"為這本相簿建立實體相簿時發生問題。 請稍後再試。"}],ALBUM_DESCRIPTION:[{type:0,value:"相簿描述"}],CREATE_BOOK_FROM_ALBUM:[{type:0,value:"使用此相簿製作畫冊"}],DOWNLOAD_PHOTOS_AND_VIDEO:[{type:0,value:"下載 "},{type:6,value:"photoCount",options:{one:{value:[{type:7},{type:0,value:" 張相片"}]},other:{value:[{type:7},{type:0,value:" 張相片"}]}},offset:0,pluralType:"cardinal"},{type:0,value:"和 "},{type:6,value:"videoCount",options:{one:{value:[{type:7},{type:0,value:" 個影片"}]},other:{value:[{type:7},{type:0,value:" 個影片"}]}},offset:0,pluralType:"cardinal"}],DOWNLOAD_PHOTOS:[{type:0,value:"下載 "},{type:6,value:"photoCount",options:{one:{value:[{type:7},{type:0,value:" 張相片"}]},other:{value:[{type:7},{type:0,value:" 張相片"}]}},offset:0,pluralType:"cardinal"}],DOWNLOAD_VIDEOS:[{type:0,value:"下載 "},{type:6,value:"videoCount",options:{one:{value:[{type:7},{type:0,value:" 個影片"}]},other:{value:[{type:7},{type:0,value:" 個影片"}]}},offset:0,pluralType:"cardinal"}],DOWNLOAD_ZIP:[{type:0,value:"下載 zip 檔案"}],DOWNLOAD_ZIP_PART:[{type:0,value:"下載 zip 檔案的第 "},{type:1,value:"partSequence"},{type:0,value:" 部分"}],ALOT_OF_PHOTOS:[{type:0,value:"嘩，好多相片！ 按一下將逐批相片下載為 zip 檔案。"}],DOWNLOAD_ALBUM_NOT_AVAILABLE_ERROR:[{type:0,value:"這個相簿內沒有可供下載的相片或影片。"}],DOWNLOAD_ALBUM_DISABLED_ERROR:[{type:0,value:"目前無法下載相簿。 請在一分鐘後再試一次。"}],DOWNLOAD_ALBUM_GENERIC_ERROR:[{type:0,value:"下載這個相簿時發生錯誤。 請再試一次。"}],DOWNLOAD_ALBUM_LICENSE_MESSAGE:[{type:0,value:"這些相片可能有一種或多種使用許可。下載此相簿前，請先瀏覽個別相片頁面了解使用許可詳情。"}],DOWNLOAD_ALBUM_LICENSE_MESSAGE_ALT:[{type:0,value:"這些相片可能有一種或多種使用許可。下載此相簿前，請先瀏覽個別相片頁面，以了解每張相片的指定許可類型"}],DOWNLOAD_ALBUM_LICENSE_MESSAGE_ALT_2:[{type:0,value:"這些相片可能有一種或多種使用許可，或版權所有。下載此相簿前，請先瀏覽個別相片頁面，以了解每張相片的指定許可類型。"}],DOWNLOAD_ALBUM_LEARN_MORE:[{type:0,value:'瀏覽 <a href="https://www.flickr.com/creativecommons" target="_blank">Creative Commons</a> 以了解詳情'}],CONFIRM_ALBUM_DELETE_NO_CONTENTS_DELETED:[{type:0,value:"你確定要刪除此相簿嗎？ (別擔心，我們不會刪除任何內容。)"}],DELETE_THIS_ALBUM:[{type:0,value:"刪除此相簿"}],SHARE_THIS_ALBUM:[{type:0,value:"分享此相簿"}],CREATE_NEW_ALBUM:[{type:0,value:"建立新相簿"}],NEW_ALBUM:[{type:0,value:"新相簿"}],NEW_COLLECTION:[{type:0,value:"新的珍藏集"}],VIEW_COLLECTIONS:[{type:0,value:"查看珍藏集"}],VIEW_MY_COLLECTIONS:[{type:0,value:"查看我的珍藏集"}],SORT:[{type:0,value:"排列"}],SORT_DATE_TAKEN_OLDEST:[{type:0,value:"按拍攝日期排序 (由最舊開始)"}],SORT_DATE_TAKEN_NEWEST:[{type:0,value:"按拍攝日期排序 (由最新開始)"}],SORT_DATE_UPLOADED_OLDEST:[{type:0,value:"按上傳日期排序 (由最舊開始)"}],SORT_DATE_UPLOADED_NEWEST:[{type:0,value:"按上傳日期排序 (由最新開始)"}],SORT_ALPHABETICALLY:[{type:0,value:"按英文字母順序"}],SORT_RANDOMLY:[{type:0,value:"隨機"}],SORT_REVERSE:[{type:0,value:"倒轉目前的次序"}],SORT_ALMOST_DONE:[{type:0,value:"即將完成..."}],TIMEOUT_FAILURE:[{type:0,value:"我們目前無法顯示此相簿，請再試一次。"}],OPENGRAPH_DESCRIPTION:[{type:0,value:"在 Flickr 上發掘這本由 "},{type:1,value:"owner"},{type:0,value:" 發佈的相簿！"}],EDIT_ALBUM:[{type:0,value:"編輯相簿"}],DELETE_ALBUM:[{type:0,value:"刪除相簿"}],DELETE_ALBUM_CONFIRMATION:[{type:0,value:"是否確定要刪除此相簿？"}]})}),"@VERSION@",{requires:["intl"]});YUI.add("hermes-template-album-header",(function(e,l){var n=e.Template.Handlebars.revive({1:function(e,l,n,t,a){var o,i=null!=l?l:e.nullContext||{},r=e.hooks.helperMissing,s=e.lookupProperty||function(e,l){if(Object.prototype.hasOwnProperty.call(e,l))return e[l]};return'\t\t<span class="edit-cover-photo" title="'+e.escapeExpression((s(n,"intlMessage")||l&&s(l,"intlMessage")||r).call(i,{name:"intlMessage",hash:{intlName:"album-page.EDIT_COVER"},data:a,loc:{start:{line:7,column:40},end:{line:7,column:88}}}))+'">\n\t\t\t<i></i>\n\t\t</span>\n'+(null!=(o=(s(n,"isFlipped")||l&&s(l,"isFlipped")||r).call(i,"enable-change-album-sorting",{name:"isFlipped",hash:{},fn:e.program(2,a,0),inverse:e.noop,data:a,loc:{start:{line:10,column:2},end:{line:17,column:16}}}))?o:"")},2:function(e,l,n,t,a){var o,i=e.lookupProperty||function(e,l){if(Object.prototype.hasOwnProperty.call(e,l))return e[l]};return null!=(o=i(n,"if").call(null!=l?l:e.nullContext||{},null!=l?i(l,"sortEnabled"):l,{name:"if",hash:{},fn:e.program(3,a,0),inverse:e.noop,data:a,loc:{start:{line:11,column:3},end:{line:16,column:10}}}))?o:""},3:function(e,l,n,t,a){var o=e.lookupProperty||function(e,l){if(Object.prototype.hasOwnProperty.call(e,l))return e[l]};return'\t\t\t\t<span class="change-album-sorting">\n\t\t\t\t\t<span class="label-beta">STAFF</span>\n\t\t\t\t\t'+e.escapeExpression((o(n,"intlMessage")||l&&o(l,"intlMessage")||e.hooks.helperMissing).call(null!=l?l:e.nullContext||{},{name:"intlMessage",hash:{intlName:"album-page.SORT"},data:a,loc:{start:{line:14,column:5},end:{line:14,column:47}}}))+"<i></i>\n\t\t\t\t</span>\n"},compiler:[8,">= 4.3.0"],main:function(e,l,n,t,a){var o,i,r=null!=l?l:e.nullContext||{},s=e.hooks.helperMissing,u="function",c=e.escapeExpression,p=e.lookupProperty||function(e,l){if(Object.prototype.hasOwnProperty.call(e,l))return e[l]};return'<div class="album-header-content" style="height: '+c(typeof(i=null!=(i=p(n,"height")||(null!=l?p(l,"height"):l))?i:s)===u?i.call(r,{name:"height",hash:{},data:a,loc:{start:{line:1,column:49},end:{line:1,column:59}}}):i)+"px; background-image: url("+c(typeof(i=null!=(i=p(n,"cover-photo-url")||(null!=l?p(l,"cover-photo-url"):l))?i:s)===u?i.call(r,{name:"cover-photo-url",hash:{},data:a,loc:{start:{line:1,column:85},end:{line:1,column:104}}}):i)+');">\n\n\t<div class="dimming-shim"></div>\n\t<div class="flex-padding"></div>\n\n'+(null!=(o=p(n,"if").call(r,null!=l?p(l,"viewerIsOwner"):l,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a,loc:{start:{line:6,column:1},end:{line:18,column:8}}}))?o:"")+"\n\t"+c((p(n,"outlet")||l&&p(l,"outlet")||s).call(r,null!=l?p(l,"album-title-desc-view"):l,{name:"outlet",hash:{},data:a,loc:{start:{line:20,column:1},end:{line:20,column:33}}}))+"\n\t"+c((p(n,"outlet")||l&&p(l,"outlet")||s).call(r,null!=l?p(l,"album-stats-view"):l,{name:"outlet",hash:{},data:a,loc:{start:{line:21,column:1},end:{line:21,column:28}}}))+"\n\t"+c((p(n,"outlet")||l&&p(l,"outlet")||s).call(r,null!=l?p(l,"album-engagement-view"):l,{name:"outlet",hash:{},data:a,loc:{start:{line:22,column:1},end:{line:22,column:33}}}))+'\n\t<div class="flex-padding"></div>\n\n\t'+c((p(n,"outlet")||l&&p(l,"outlet")||s).call(r,null!=l?p(l,"attribution-view"):l,{name:"outlet",hash:{},data:a,loc:{start:{line:25,column:1},end:{line:25,column:28}}}))+"\n</div>\n"},useData:!0}),t={};e.Array.each([],(function(l){var n=e.Template.get("hermes/"+l);n&&(t[l]=n)})),e.Template.register("hermes/album-header",(function(l,a){return(a=a||{}).partials=a.partials?e.merge(t,a.partials):t,n(l,a)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("hermes-template-album-title-desc",(function(n,e){var l=n.Template.Handlebars.revive({1:function(n,e,l,t,a){return"editable"},3:function(n,e,l,t,a){var i=n.lookupProperty||function(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]};return'\t\t<span class="title-desc-edit" data-action="edit" title="'+n.escapeExpression((i(l,"intlMessage")||e&&i(e,"intlMessage")||n.hooks.helperMissing).call(null!=e?e:n.nullContext||{},{name:"intlMessage",hash:{intlName:"common.EDIT"},data:a,loc:{start:{line:7,column:58},end:{line:7,column:96}}}))+'"></span>\n'},5:function(n,e,l,t,a){return"description-placeholder"},7:function(n,e,l,t,a){var i=n.lookupProperty||function(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]};return"\t\t\t"+n.escapeExpression((i(l,"renderTrustedMarkup")||e&&i(e,"renderTrustedMarkup")||n.hooks.helperMissing).call(null!=e?e:n.nullContext||{},null!=e?i(e,"description"):e,{name:"renderTrustedMarkup",hash:{},data:a,loc:{start:{line:14,column:3},end:{line:14,column:38}}}))+"\n"},9:function(n,e,l,t,a){var i,o=n.lookupProperty||function(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]};return null!=(i=o(l,"if").call(null!=e?e:n.nullContext||{},null!=e?o(e,"canEdit"):e,{name:"if",hash:{},fn:n.program(10,a,0),inverse:n.noop,data:a,loc:{start:{line:16,column:3},end:{line:18,column:10}}}))?i:""},10:function(n,e,l,t,a){var i=n.lookupProperty||function(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]};return"\t\t\t\t"+n.escapeExpression((i(l,"intlMessage")||e&&i(e,"intlMessage")||n.hooks.helperMissing).call(null!=e?e:n.nullContext||{},{name:"intlMessage",hash:{intlName:"album-page.ALBUM_ADD_DESCRIPTION"},data:a,loc:{start:{line:17,column:4},end:{line:17,column:63}}}))+"\n"},12:function(n,e,l,t,a){var i=n.lookupProperty||function(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]};return'\t<button class="done-editing-album-title-desc hidden" data-action="saveAlbumTitleDescEdit">'+n.escapeExpression((i(l,"intlMessage")||e&&i(e,"intlMessage")||n.hooks.helperMissing).call(null!=e?e:n.nullContext||{},{name:"intlMessage",hash:{intlName:"common.DONE"},data:a,loc:{start:{line:32,column:91},end:{line:32,column:129}}}))+"</button>\n"},compiler:[8,">= 4.3.0"],main:function(n,e,l,t,a){var i,o,r=null!=e?e:n.nullContext||{},s=n.hooks.helperMissing,c=n.escapeExpression,u=n.lookupProperty||function(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]};return'<div class="title-desc-block '+(null!=(i=u(l,"if").call(r,null!=e?u(e,"canEdit"):e,{name:"if",hash:{},fn:n.program(1,a,0),inverse:n.noop,data:a,loc:{start:{line:1,column:29},end:{line:1,column:59}}}))?i:"")+'">\n\t<div class="'+(null!=(i=u(l,"if").call(r,null!=e?u(e,"canEdit"):e,{name:"if",hash:{},fn:n.program(1,a,0),inverse:n.noop,data:a,loc:{start:{line:2,column:13},end:{line:2,column:43}}}))?i:"")+' album-title">\n\t\t'+c("function"==typeof(o=null!=(o=u(l,"title")||(null!=e?u(e,"title"):e))?o:s)?o.call(r,{name:"title",hash:{},data:a,loc:{start:{line:3,column:2},end:{line:3,column:11}}}):o)+"\n\t</div>\n\n"+(null!=(i=u(l,"if").call(r,null!=e?u(e,"canEdit"):e,{name:"if",hash:{},fn:n.program(3,a,0),inverse:n.noop,data:a,loc:{start:{line:6,column:1},end:{line:8,column:8}}}))?i:"")+'\n\t<input type="text" class="meta-field edit-meta-field edit-album-title unfluid" wrap="on"></input>\n\n\t<div class="'+(null!=(i=u(l,"if").call(r,null!=e?u(e,"canEdit"):e,{name:"if",hash:{},fn:n.program(1,a,0),inverse:n.noop,data:a,loc:{start:{line:12,column:13},end:{line:12,column:43}}}))?i:"")+" album-desc "+(null!=(i=u(l,"unless").call(r,null!=e?u(e,"description"):e,{name:"unless",hash:{},fn:n.program(5,a,0),inverse:n.noop,data:a,loc:{start:{line:12,column:55},end:{line:12,column:112}}}))?i:"")+'">\n'+(null!=(i=u(l,"if").call(r,null!=e?u(e,"description"):e,{name:"if",hash:{},fn:n.program(7,a,0),inverse:n.program(9,a,0),data:a,loc:{start:{line:13,column:2},end:{line:19,column:9}}}))?i:"")+'\t</div>\n\n\t<div class="description-show-more hidden">\n\t\t<span class="description-show-more-link '+(null!=(i=u(l,"if").call(r,null!=e?u(e,"canEdit"):e,{name:"if",hash:{},fn:n.program(1,a,0),inverse:n.noop,data:a,loc:{start:{line:23,column:42},end:{line:23,column:72}}}))?i:"")+'" data-action="showMore">\n\t\t\t'+c((u(l,"intlMessage")||e&&u(e,"intlMessage")||s).call(r,{name:"intlMessage",hash:{intlName:"common.SHOW_MORE"},data:a,loc:{start:{line:24,column:3},end:{line:24,column:46}}}))+'\n\t\t</span>\n\t</div>\n\n\t<textarea class="meta-field edit-meta-field edit-album-desc unfluid" wrap="on"></textarea>\n</div>\n\n'+(null!=(i=u(l,"if").call(r,null!=e?u(e,"canEdit"):e,{name:"if",hash:{},fn:n.program(12,a,0),inverse:n.noop,data:a,loc:{start:{line:31,column:0},end:{line:33,column:7}}}))?i:"")},useData:!0}),t={};n.Array.each([],(function(e){var l=n.Template.get("hermes/"+e);l&&(t[e]=l)})),n.Template.register("hermes/album-title-desc",(function(e,a){return(a=a||{}).partials=a.partials?n.merge(t,a.partials):t,l(e,a)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});